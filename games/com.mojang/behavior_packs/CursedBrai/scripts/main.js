import{world as a,system as t,EntityComponentTypes as n,Player as e}from"@minecraft/server";let anomaliBrainrot={tung_sahur:["anomali.tung_sahur",75],tralala:["anomali.tralalero",70],brr_patapim:["anomali.brr_patapim",55]};function handleBrainrotSound(n){Object.entries(anomaliBrainrot).forEach(([e,r])=>{if(n.typeId===`pa:${e}`){let o=t.runInterval(()=>{if(!n.isValid()){t.clearRun(o);return}for(let e of a.getPlayers()){let i=e.location,l=n.location,s=l.x-i.x,u=l.y-i.y,m=l.z-i.z,p=Math.sqrt(s*s+u*u+m*m),y=Math.max(.1,1.6-p/16*1.5)/1.5;p<=16&&e.playSound(r[0],{volume:parseFloat(y.toFixed(2))})}},parseFloat(r[1]))}})}a.afterEvents.entityHitEntity.subscribe(a=>{let{damagingEntity:t,hitEntity:r}=a;Object.keys(anomaliBrainrot).forEach(a=>{if(t.typeId!==`pa:${a}`||!r.isValid()||r instanceof e)return;let o=r.getComponent(n.Health),i=t.getComponent(n.Health);i.setCurrentValue(i.currentValue+o.currentValue),r.dimension.playSound("anomali.keywoo",r.location),r.dimension.spawnParticle("pa:keywoo_particle",r.location),r.remove()})}),a.afterEvents.entityLoad.subscribe(({entity:a})=>{handleBrainrotSound(a)}),a.afterEvents.entitySpawn.subscribe(({entity:a})=>{handleBrainrotSound(a)});